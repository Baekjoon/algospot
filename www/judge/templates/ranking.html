{% extends "judge-base.html" %}
{% block title %}
	{{ title }}
{% endblock %}


{% block page_title %}
	{{ title }}
{% endblock %}

{% block page_tabs %}
{% endblock %}

{% block judge_problem_class %}current{% endblock %}
{% block page_contents %}
	{% load judge_tags %}
	{% load common_tags %}
	<section>
		<table class="judge_ranking">
			<thead>
				<tr>
					<th class="rank">랭킹</th>
					<th class="user">
						사용자
					</th>
					<th class="comment">
						한마디
					</th>
					<th class="solved_problems">
						{% if order_by == "solved" %}
							푼 문제↓ 
						{% else %}
							<a href="{% url judge-ranking "solved" 1 %}">푼 문제</a>
						{% endif %}
					</th>
					<th class="authored_problems">
						{% if order_by == "authored" %}
							출제↓ 
						{% else %}
							<a href="{% url judge-ranking "authored" 1 %}">출제</a>
						{% endif %}					
					</th>
					<th class="submissions">
						답안 수
					</th>
					<th class="accepted_ratio">
						{% if order_by == "ratio" %}
							정답 비율↓ 
						{% else %}
							<a href="{% url judge-ranking "ratio" 1 %}">정답 비율</a>
						{% endif %}					
					</th>
				</tr>
			</thead>
			<tbody>
				{% for profile in pagination.page.object_list %}
					<tr>
						<td class="rank">
							{{ profile|user_rank }}
						</td>
						<td class="user">
							{{ profile.user|print_username }}
						</td>
						<td class="comment">
							{{ profile.intro }}
						</td>
						<td class="solved_problems">
							<a href="{% url judge-problem-list %}?user_tried={{ profile.user.id }}&verdict=solved">{{ profile.solved_problems }}</a>
						</td>
						<td class="authored_problems">
							<a href="{% url judge-problem-list %}?author={{ profile.user.username }}">
								{{ profile.user__problem__count }}
							</a>
						</td>
						<td class="submissions">
							<a href="{% url judge-submission-recent %}?user={{ profile.user.username }}">
								{{ profile.submissions }}
							</a>
						</td>
						<td class="accepted_ratio">
								{{ profile.accepted }} ({% percentage profile.accepted profile.submissions %}%)
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</section>
	<section class="pagination">
		{{ pagination.render }}
	</section>
	{% if use_filters %}
	<section>
		<form method="GET" action="">
			<fieldset class="kor problem-filter">
				<legend>골라보기</legend>
				<dl>
					<dt>
						문제 분류
					</dt>
					<dd>
						<select name="tag">
							<option value=""></option>
							{% for tag in tags %}
								<option {% if tag == filters.tag %}selected{% endif %} value="{{ tag }}">{{ tag }}</option>
							{% endfor %}
						</select>
					</dd>
					<dt>
						출처
					</dt>
					<dd>
						<select name="source">
							<option value=""></option>
							{% for source in sources %}
								<option {% if source == filters.source %}selected{% endif %} value="{{ source }}">{{ source }}</option>
							{% endfor %}
						</select>
					</dd>
					<dt>
						출제자
					</dt>
					<dd>
						<select name="author">
							<option value=""></option>
							{% for author in authors %}
								<option {% if author == filters.author %}selected{% endif %} value="{{ author }}">{{ author }}</option>
							{% endfor %}
						</select>
					</dd>
					<dt>
						적용
					</dt>
					<dd>
						<button type="submit">적용하기</button>
					</dd>
				</dl>
			</fieldset>
		</form>
	</section>
	{% endif %}
{% endblock %}
